function t(t){let e=t.target,i=e.parentNode;if(i.children.length>1)return;let{fragment:n}=t.detail,l=e.getAttribute("data-lines")||i.getAttribute("data-lines");if(!l)return;let r=(a=l)?a.split(/,\s*/).map((function(t){let e={};if(t.indexOf("-")>-1){let[i,n]=t.split("-").map((t=>Number(t)));e.start=i,e.lines=n+1-i}else e.start=Number(t),e.lines=1;return e})):null;var a;if(!r)return;"static"===getComputedStyle(i).position&&(i.style.position="relative");let u=function(t){let e=getComputedStyle(t);return parseFloat(e.lineHeight)}(e),s=function(t,e){let i=document.createElement("span");i.setAttribute("class","daub-line-highlight-dummy"),i.setAttribute("aria-hidden","true"),i.textContent=" ",t.insertBefore(i,t.firstChild);let n=e.getBoundingClientRect(),l=i.getBoundingClientRect(),r=n.top-l.top;return t.removeChild(i),Math.abs(r)}(e,i);r.forEach((t=>{let e=function(t,e,i){let n=document.createElement("mark");n.setAttribute("class","daub-line-highlight"),n.setAttribute("aria-hidden","true"),n.textContent=new Array(t.lines).join("\n")+" ";let l=i+(t.start-1)*e-2;return Object.assign(n.style,{position:"absolute",top:l+"px",left:"0",right:"0",lineHeight:"inherit"}),n}(t,u,s);n.appendChild(e)}))}function e(){return document.addEventListener("daub-will-highlight",t),i}function i(){document.removeEventListener("daub-will-highlight",t)}export{e as default};
